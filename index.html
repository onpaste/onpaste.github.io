<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClipVault - 安全在线剪切板</title>
  <!-- 引入外部资源 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- 代码高亮和编辑器功能 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#4080FF',
            dark: '#1D2939',
            light: '#F9FAFB',
            neutral: '#667085',
            success: '#039855',
            warning: '#F79009',
            danger: '#D92D20',
            editor: {
              dark: '#0F172A',
              light: '#FFFFFF',
              lineNumber: '#94A3B8',
              border: '#334155'
            }
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Consolas', 'Monaco', 'Menlo', 'monospace']
          },
          boxShadow: {
            'card': '0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.02)',
            'hover': '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
            'editor': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)'
          }
        },
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .transition-all-300 {
        transition: all 0.3s ease;
      }
      .scrollbar-thin {
        scrollbar-width: thin;
      }
      .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      .scrollbar-thin::-webkit-scrollbar-track {
        background: transparent;
      }
      .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: rgba(156, 163, 175, 0.5);
        border-radius: 3px;
      }
      .editor-line-height {
        line-height: 1.5rem;
      }
      .tab-size-4 {
        tab-size: 4;
      }
      .whitespace-pre-wrap {
        white-space: pre-wrap;
      }
    }
  </style>
  
  <style>
    /* 基础样式 */
    body {
      font-family: 'Inter', system-ui, sans-serif;
      background-color: #111827; /* 默认深色背景 */
    }
    
    /* 深色模式默认 */
    .dark {
      background-color: #111827;
    }
    
    /* 动画效果 */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-fade-in {
      animation: fadeIn 0.4s ease forwards;
    }
    
    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    
    /* 加载动画 */
    .loader {
      border-top-color: #165DFF;
      animation: spinner 0.8s linear infinite;
    }
    
    @keyframes spinner {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* 代码编辑器样式 - 默认深色模式 */
    .editor-container {
      position: relative;
      border-radius: 0.5rem;
      overflow: hidden;
      font-family: 'Consolas', 'Monaco', 'Menlo', monospace;
      background-color: theme('colors.editor.dark');
    }
    
    /* 修复行号挤在一起的问题 - 关键优化 */
    .editor-line-numbers {
      width: 48px; /* 增加宽度确保行号不拥挤 */
      padding: 0.75rem 0.75rem; /* 调整内边距 */
      text-align: right;
      user-select: none;
      background-color: #1E293B; /* 行号区域背景色，与编辑器区分 */
      color: theme('colors.editor.lineNumber');
      font-size: 0.875rem;
      line-height: 1.5rem; /* 与编辑器行高一致 */
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    
    .editor-line-numbers span {
      display: block; /* 确保每个行号单独一行 */
      height: 1.5rem; /* 固定行高，确保对齐 */
      padding: 0;
      margin: 0;
    }
    
    .editor-content {
      flex: 1;
      padding: 0.75rem;
      font-size: 0.875rem;
      resize: none;
      border: none;
      outline: none;
      background-color: theme('colors.editor.dark');
      color: #E2E8F0;
      tab-size: 4;
      line-height: 1.5rem;
      border-left: 1px solid #334155;
    }
    
    /* 浅色模式样式覆盖 */
    .light .editor-line-numbers {
      background-color: #F8FAFC;
      color: #64748B;
      border-right: 1px solid #E2E8F0;
    }
    
    .light .editor-content {
      background-color: theme('colors.editor.light');
      color: #1E293B;
      border-left: 1px solid #E2E8F0;
    }
    
    .editor-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 1rem;
      background-color: #1E293B;
      border-bottom: 1px solid #334155;
    }
    
    .light .editor-toolbar {
      background-color: #F1F5F9;
      border-bottom: 1px solid #E2E8F0;
    }
    
    .editor-language-select {
      background-color: #334155;
      color: #E2E8F0;
      border: none;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
    }
    
    .light .editor-language-select {
      background-color: #FFFFFF;
      color: #1E293B;
      border: 1px solid #E2E8F0;
    }
    
    /* 高亮代码块样式 */
    .highlighted-code {
      padding: 0.75rem;
      font-size: 0.875rem;
      background-color: theme('colors.editor.dark');
      color: #E2E8F0;
      border-radius: 0.5rem;
      overflow-x: auto;
      line-height: 1.5rem;
    }
    
    .light .highlighted-code {
      background-color: theme('colors.editor.light');
      color: #1E293B;
      border: 1px solid #E2E8F0;
    }
  </style>
</head>

<body class="min-h-screen flex flex-col dark" id="app-body">
  <!-- 导航栏 -->
  <header class="bg-dark shadow-sm sticky top-0 z-50 transition-all duration-300" id="navbar">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <a href="#" class="flex items-center space-x-2">
        <div class="w-10 h-10 rounded-lg bg-primary flex items-center justify-center text-white">
          <i class="fa fa-clipboard text-xl"></i>
        </div>
        <span class="text-xl font-bold text-white">ClipVault</span>
      </a>
      
      <div class="flex items-center space-x-4">
        <!-- 主题切换按钮 -->
        <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-800 transition-colors duration-200">
          <i class="fa fa-moon-o hidden dark:block text-warning"></i>
          <i class="fa fa-sun-o dark:hidden text-warning"></i>
        </button>
        
        <nav class="hidden md:flex items-center space-x-8">
          <a href="#" class="text-white hover:text-primary transition-colors duration-200 font-medium">首页</a>
          <a href="#how-it-works" class="text-gray-400 hover:text-primary transition-colors duration-200">使用说明</a>
          <a href="#features" class="text-gray-400 hover:text-primary transition-colors duration-200">功能特点</a>
        </nav>
        
        <button class="md:hidden text-white text-xl" id="mobile-menu-button">
          <i class="fa fa-bars"></i>
        </button>
      </div>
    </div>
    
    <!-- 移动端菜单 -->
    <div class="md:hidden hidden bg-dark w-full shadow-md absolute animate-fade-in" id="mobile-menu">
      <div class="container mx-auto px-4 py-3 flex flex-col space-y-4">
        <a href="#" class="text-white hover:text-primary transition-colors duration-200 py-2 border-b border-gray-800">首页</a>
        <a href="#how-it-works" class="text-gray-400 hover:text-primary transition-colors duration-200 py-2 border-b border-gray-800">使用说明</a>
        <a href="#features" class="text-gray-400 hover:text-primary transition-colors duration-200 py-2">功能特点</a>
      </div>
    </div>
  </header>

  <!-- 主内容区 -->
  <main class="flex-grow">
    <!-- 英雄区域 -->
    <section class="py-16 md:py-24 bg-gradient-to-b from-dark to-gray-900">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto text-center mb-12 animate-fade-in">
          <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-white leading-tight mb-4">
            代码级剪切板，<span class="text-primary">安全分享文本</span>
          </h1>
          <p class="text-[clamp(1rem,2vw,1.25rem)] text-gray-400 max-w-2xl mx-auto">
            代码编辑器风格的在线剪切板，支持语法高亮、行号显示，生成唯一密钥，安全分享您的代码和文本。
          </p>
        </div>
        
        <!-- 剪切板卡片 -->
        <div class="max-w-4xl mx-auto bg-dark rounded-2xl shadow-card dark:shadow-lg p-6 md:p-8 transform hover:shadow-hover transition-all duration-300 animate-fade-in delay-100">
          <div class="mb-6">
            <div class="flex justify-between items-center mb-3">
              <label class="text-white font-medium">输入您要保存的内容</label>
              <div class="flex items-center space-x-2">
                <span class="text-xs text-gray-500">语法高亮：</span>
                <select id="editor-language" class="editor-language-select">
                  <option value="plaintext">纯文本</option>
                  <option value="javascript">JavaScript</option>
                  <option value="html">HTML</option>
                  <option value="css">CSS</option>
                  <option value="python">Python</option>
                  <option value="java">Java</option>
                  <option value="c">C</option>
                  <option value="cpp">C++</option>
                  <option value="php">PHP</option>
                  <option value="json">JSON</option>
                  <option value="markdown">Markdown</option>
                </select>
              </div>
            </div>
            
            <!-- 代码编辑器样式的输入框 -->
            <div class="editor-container flex scrollbar-thin shadow-editor">
              <div class="editor-line-numbers" id="input-line-numbers">
                <span>1</span>
              </div>
              <textarea 
                id="clipboard-content" 
                class="editor-content scrollbar-thin tab-size-4 whitespace-pre-wrap"
                placeholder="在此输入您想要保存和分享的代码或文本内容..."
              ></textarea>
            </div>
            
            <!-- 编辑器工具栏 -->
            <div class="editor-toolbar mt-0">
              <div class="flex items-center space-x-4">
                <button id="format-button" class="text-xs text-gray-300 hover:text-primary transition-colors duration-200 flex items-center gap-1">
                  <i class="fa fa-indent"></i>
                  <span>格式化代码</span>
                </button>
                <button id="clear-button" class="text-xs text-gray-300 hover:text-danger transition-colors duration-200 flex items-center gap-1">
                  <i class="fa fa-trash"></i>
                  <span>清空内容</span>
                </button>
              </div>
              <div class="text-xs text-gray-500" id="char-count">字符数: 0</div>
            </div>
          </div>
          
          <div class="flex flex-col md:flex-row gap-4">
            <button id="save-button" class="flex-1 bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
              <i class="fa fa-save"></i>
              <span>保存并生成密钥</span>
            </button>
          </div>
          
          <!-- 密钥结果区域 (默认隐藏) -->
          <div id="result-area" class="mt-6 hidden animate-fade-in">
            <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
              <div class="flex items-center justify-between mb-2">
                <label class="text-white font-medium">您的访问密钥</label>
                <span class="text-xs text-gray-500">请妥善保存此密钥</span>
              </div>
              <div class="flex">
                <input id="access-key" type="text" readonly class="flex-1 bg-gray-900 border border-gray-700 rounded-l-lg p-3 text-white font-mono focus:ring-0 focus:border-gray-700" />
                <button id="copy-key-button" class="bg-primary hover:bg-primary/90 text-white px-4 rounded-r-lg transition-all duration-200">
                  <i class="fa fa-copy"></i>
                </button>
              </div>
              <p class="mt-2 text-xs text-gray-500">
                分享此密钥给他人，他们可以通过下方的"通过密钥访问"功能查看您保存的内容
              </p>
            </div>
          </div>
        </div>
        
        <!-- 访问剪切板区域 -->
        <div class="max-w-4xl mx-auto bg-dark rounded-2xl shadow-card dark:shadow-lg p-6 md:p-8 mt-8 transform hover:shadow-hover transition-all duration-300 animate-fade-in delay-200">
          <h3 class="text-xl font-bold text-white mb-6">通过密钥访问内容</h3>
          
          <div class="flex flex-col md:flex-row gap-4 mb-6">
            <input 
              id="access-key-input" 
              class="flex-1 p-4 border border-gray-700 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all duration-200 bg-gray-900 text-white"
              placeholder="输入访问密钥..."
            />
            <button id="access-button" class="bg-secondary hover:bg-secondary/90 text-white font-medium py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
              <i class="fa fa-unlock-alt"></i>
              <span>访问内容</span>
            </button>
          </div>
          
          <!-- 访问结果区域 (默认隐藏) -->
          <div id="access-result-area" class="mt-6 hidden animate-fade-in">
            <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
              <div class="flex items-center justify-between mb-3">
                <label class="text-white font-medium">访问到的内容</label>
                <div class="flex items-center space-x-3">
                  <div class="flex items-center space-x-2">
                    <span class="text-xs text-gray-500">语法高亮：</span>
                    <select id="result-language" class="editor-language-select">
                      <option value="plaintext">纯文本</option>
                      <option value="javascript">JavaScript</option>
                      <option value="html">HTML</option>
                      <option value="css">CSS</option>
                      <option value="python">Python</option>
                      <option value="java">Java</option>
                      <option value="c">C</option>
                      <option value="cpp">C++</option>
                      <option value="php">PHP</option>
                      <option value="json">JSON</option>
                      <option value="markdown">Markdown</option>
                    </select>
                  </div>
                  <button id="copy-content-button" class="text-primary hover:text-primary/80 text-sm transition-colors duration-200 flex items-center gap-1">
                    <i class="fa fa-copy"></i>
                    <span>复制内容</span>
                  </button>
                </div>
              </div>
              
              <!-- 高亮显示的代码结果 -->
              <div class="editor-container flex scrollbar-thin shadow-editor">
                <div class="editor-line-numbers" id="result-line-numbers">
                  <span>1</span>
                </div>
                <pre class="editor-content scrollbar-thin whitespace-pre-wrap overflow-x-auto" id="highlighted-result"></pre>
              </div>
              
              <!-- 隐藏的textarea用于复制 -->
              <textarea 
                id="accessed-content" 
                class="hidden w-full h-40 p-4 bg-gray-900 border border-gray-700 rounded-lg focus:ring-0 focus:border-gray-700 outline-none resize-none"
                readonly
              ></textarea>
            </div>
          </div>
          
          <!-- 错误提示区域 (默认隐藏) -->
          <div id="error-area" class="mt-6 hidden animate-fade-in">
            <div class="bg-danger/20 p-4 rounded-lg border border-danger/30 flex items-start gap-3">
              <i class="fa fa-exclamation-circle text-danger mt-1"></i>
              <p class="text-danger text-sm" id="error-message">
                无效的密钥，请检查并重新输入
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- 如何使用 -->
    <section id="how-it-works" class="py-16 bg-dark">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16 animate-fade-in">
          <h2 class="text-[clamp(1.75rem,3vw,2.5rem)] font-bold text-white mb-4">使用方法</h2>
          <p class="text-gray-400 max-w-2xl mx-auto">简单三步，快速分享您的代码和文本</p>
        </div>
        
        <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
          <!-- 步骤 1 -->
          <div class="bg-gray-800 rounded-xl p-6 shadow-sm hover:shadow-card dark:hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 animate-fade-in delay-100">
            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xl font-bold mb-4">1</div>
            <h3 class="text-xl font-bold text-white mb-3">输入代码/文本</h3>
            <p class="text-gray-400">在代码编辑器中输入内容，可选择对应语言获得语法高亮。</p>
          </div>
          
          <!-- 步骤 2 -->
          <div class="bg-gray-800 rounded-xl p-6 shadow-sm hover:shadow-card dark:hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 animate-fade-in delay-200">
            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xl font-bold mb-4">2</div>
            <h3 class="text-xl font-bold text-white mb-3">生成密钥</h3>
            <p class="text-gray-400">点击保存按钮，系统将生成唯一访问密钥，请妥善保存。</p>
          </div>
          
          <!-- 步骤 3 -->
          <div class="bg-gray-800 rounded-xl p-6 shadow-sm hover:shadow-card dark:hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 animate-fade-in delay-300">
            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xl font-bold mb-4">3</div>
            <h3 class="text-xl font-bold text-white mb-3">分享访问</h3>
            <p class="text-gray-400">将密钥分享给需要访问的人，他们即可查看高亮格式的内容。</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- 功能特点 -->
    <section id="features" class="py-16 bg-gray-900">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16 animate-fade-in">
          <h2 class="text-[clamp(1.75rem,3vw,2.5rem)] font-bold text-white mb-4">功能特点</h2>
          <p class="text-gray-400 max-w-2xl mx-auto">专业级代码编辑体验，安全高效的在线剪切板解决方案</p>
        </div>
        
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
          <!-- 特点 1 -->
          <div class="bg-dark rounded-xl p-6 shadow-card dark:shadow-lg hover:shadow-hover transition-all duration-300 animate-fade-in delay-100">
            <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-4">
              <i class="fa fa-code text-xl"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">代码编辑器体验</h3>
            <p class="text-gray-400">支持语法高亮、行号显示、代码缩进、格式美化，提供专业的代码编辑环境。</p>
          </div>
          
          <!-- 特点 2 -->
          <div class="bg-dark rounded-xl p-6 shadow-card dark:shadow-lg hover:shadow-hover transition-all duration-300 animate-fade-in delay-200">
            <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-4">
              <i class="fa fa-lock text-xl"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">安全可靠</h3>
            <p class="text-gray-400">基于唯一密钥访问，确保您的内容仅被授权人员查看，保护信息安全。</p>
          </div>
          
          <!-- 特点 3 -->
          <div class="bg-dark rounded-xl p-6 shadow-card dark:shadow-lg hover:shadow-hover transition-all duration-300 animate-fade-in delay-300">
            <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-4">
              <i class="fa fa-user-o text-xl"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">无需注册</h3>
            <p class="text-gray-400">无需创建账户，直接使用所有功能，节省您的时间和隐私。</p>
          </div>
          
          <!-- 特点 4 -->
          <div class="bg-dark rounded-xl p-6 shadow-card dark:shadow-lg hover:shadow-hover transition-all duration-300 animate-fade-in delay-100">
            <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-4">
              <i class="fa fa-moon-o text-xl"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">深色模式优先</h3>
            <p class="text-gray-400">默认深色模式，保护开发者视力，同时支持浅色模式切换，适应不同使用场景。</p>
          </div>
          
          <!-- 特点 5 -->
          <div class="bg-dark rounded-xl p-6 shadow-card dark:shadow-lg hover:shadow-hover transition-all duration-300 animate-fade-in delay-200">
            <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-4">
              <i class="fa fa-copy text-xl"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">一键复制</h3>
            <p class="text-gray-400">密钥和代码内容均可一键复制，方便您快速分享和保存。</p>
          </div>
          
          <!-- 特点 6 -->
          <div class="bg-dark rounded-xl p-6 shadow-card dark:shadow-lg hover:shadow-hover transition-all duration-300 animate-fade-in delay-300">
            <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-4">
              <i class="fa fa-shield text-xl"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">本地存储</h3>
            <p class="text-gray-400">所有数据存储在您的浏览器本地，保护隐私，无需担心数据泄露。</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- 常见问题 -->
    <section class="py-16 bg-dark">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16 animate-fade-in">
          <h2 class="text-[clamp(1.75rem,3vw,2.5rem)] font-bold text-white mb-4">常见问题</h2>
          <p class="text-gray-400 max-w-2xl mx-auto">解答您可能遇到的疑问</p>
        </div>
        
        <div class="max-w-3xl mx-auto space-y-4 animate-fade-in">
          <!-- 问题 1 -->
          <div class="border border-gray-700 rounded-lg overflow-hidden">
            <button class="faq-question w-full flex justify-between items-center p-4 text-left bg-gray-800 hover:bg-gray-700 transition-colors duration-200">
              <span class="font-medium text-white">支持哪些编程语言的语法高亮？</span>
              <i class="fa fa-chevron-down text-gray-400 transition-transform duration-200"></i>
            </button>
            <div class="faq-answer bg-dark p-4 border-t border-gray-700 hidden">
              <p class="text-gray-400">目前支持JavaScript、HTML、CSS、Python、Java、C、C++、PHP、JSON、Markdown等常见语言，同时支持纯文本模式。可通过编辑器上方的语言选择器切换。</p>
            </div>
          </div>
          
          <!-- 问题 2 -->
          <div class="border border-gray-700 rounded-lg overflow-hidden">
            <button class="faq-question w-full flex justify-between items-center p-4 text-left bg-gray-800 hover:bg-gray-700 transition-colors duration-200">
              <span class="font-medium text-white">我的数据会保存多久？</span>
              <i class="fa fa-chevron-down text-gray-400 transition-transform duration-200"></i>
            </button>
            <div class="faq-answer bg-dark p-4 border-t border-gray-700 hidden">
              <p class="text-gray-400">您的数据存储在浏览器的本地存储中，只要不清除浏览器数据，将一直保存。如果您清除了浏览器缓存或使用了隐私模式，数据可能会丢失，请妥善保存您的密钥。</p>
            </div>
          </div>
          
          <!-- 问题 3 -->
          <div class="border border-gray-700 rounded-lg overflow-hidden">
            <button class="faq-question w-full flex justify-between items-center p-4 text-left bg-gray-800 hover:bg-gray-700 transition-colors duration-200">
              <span class="font-medium text-white">可以格式化代码吗？</span>
              <i class="fa fa-chevron-down text-gray-400 transition-transform duration-200"></i>
            </button>
            <div class="faq-answer bg-dark p-4 border-t border-gray-700 hidden">
              <p class="text-gray-400">是的，支持代码格式化功能。输入代码后点击编辑器工具栏的"格式化代码"按钮，系统会自动整理代码缩进和格式，目前支持JSON、JavaScript、HTML、CSS等语言的格式化。</p>
            </div>
          </div>
          
          <!-- 问题 4 -->
          <div class="border border-gray-700 rounded-lg overflow-hidden">
            <button class="faq-question w-full flex justify-between items-center p-4 text-left bg-gray-800 hover:bg-gray-700 transition-colors duration-200">
              <span class="font-medium text-white">我的内容安全吗？会被其他人看到吗？</span>
              <i class="fa fa-chevron-down text-gray-400 transition-transform duration-200"></i>
            </button>
            <div class="faq-answer bg-dark p-4 border-t border-gray-700 hidden">
              <p class="text-gray-400">您的内容仅通过唯一的密钥访问，只要您不分享密钥，其他人无法查看您的内容。所有数据存储在您的本地浏览器中，不会上传到任何服务器，确保您的隐私安全。</p>
            </div>
          </div>
          
          <!-- 问题 5 -->
          <div class="border border-gray-700 rounded-lg overflow-hidden">
            <button class="faq-question w-full flex justify-between items-center p-4 text-left bg-gray-800 hover:bg-gray-700 transition-colors duration-200">
              <span class="font-medium text-white">忘记了密钥怎么办？</span>
              <i class="fa fa-chevron-down text-gray-400 transition-transform duration-200"></i>
            </button>
            <div class="faq-answer bg-dark p-4 border-t border-gray-700 hidden">
              <p class="text-gray-400">如果您忘记了密钥，将无法恢复访问您的内容。请务必在生成密钥后立即复制并保存到安全的地方。系统不提供密钥恢复功能，以保护您的隐私安全。</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- 页脚 -->
  

  <!-- 通知组件 -->
  <div id="notification" class="fixed bottom-4 right-4 p-4 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-3 z-50">
    <i class="fa fa-check-circle text-xl"></i>
    <span id="notification-message"></span>
  </div>

  <!-- JavaScript 逻辑 -->
  <script>
    // DOM 元素
    const saveButton = document.getElementById('save-button');
    const clipboardContent = document.getElementById('clipboard-content');
    const resultArea = document.getElementById('result-area');
    const accessKey = document.getElementById('access-key');
    const copyKeyButton = document.getElementById('copy-key-button');
    const accessKeyInput = document.getElementById('access-key-input');
    const accessButton = document.getElementById('access-button');
    const accessResultArea = document.getElementById('access-result-area');
    const accessedContent = document.getElementById('accessed-content');
    const highlightedResult = document.getElementById('highlighted-result');
    const copyContentButton = document.getElementById('copy-content-button');
    const errorArea = document.getElementById('error-area');
    const errorMessage = document.getElementById('error-message');
    const notification = document.getElementById('notification');
    const notificationMessage = document.getElementById('notification-message');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const navbar = document.getElementById('navbar');
    const faqQuestions = document.querySelectorAll('.faq-question');
    const themeToggle = document.getElementById('theme-toggle');
    const appBody = document.getElementById('app-body');
    const inputLineNumbers = document.getElementById('input-line-numbers');
    const resultLineNumbers = document.getElementById('result-line-numbers');
    const charCount = document.getElementById('char-count');
    const formatButton = document.getElementById('format-button');
    const clearButton = document.getElementById('clear-button');
    const editorLanguage = document.getElementById('editor-language');
    const resultLanguage = document.getElementById('result-language');
    
    // 存储键名
    const STORAGE_KEY = 'clipvault_items';
    const THEME_KEY = 'clipvault_theme';
    
    // 初始化主题 - 默认深色模式
    function initTheme() {
      const savedTheme = localStorage.getItem(THEME_KEY);
      // 如果没有保存的主题，默认深色模式
      if (savedTheme === 'light') {
        appBody.classList.add('light');
        appBody.classList.remove('dark');
      } else {
        appBody.classList.add('dark');
        appBody.classList.remove('light');
        localStorage.setItem(THEME_KEY, 'dark'); // 保存默认深色主题
      }
    }
    
    // 切换主题
    themeToggle.addEventListener('click', () => {
      if (appBody.classList.contains('dark')) {
        appBody.classList.remove('dark');
        appBody.classList.add('light');
        localStorage.setItem(THEME_KEY, 'light');
        showNotification('已切换至浅色模式', 'info');
      } else {
        appBody.classList.add('dark');
        appBody.classList.remove('light');
        localStorage.setItem(THEME_KEY, 'dark');
        showNotification('已切换至深色模式', 'info');
      }
      // 更新代码高亮样式
      if (highlightedResult.innerHTML) {
        highlightResultContent();
      }
    });
    
    // 生成行号 - 修复挤在一起的问题
    function generateLineNumbers(textarea, lineNumbersElement) {
      const lines = textarea.value.split('\n');
      const lineCount = lines.length;
      
      // 清空现有行号
      lineNumbersElement.innerHTML = '';
      
      // 为每一行创建单独的span元素
      for (let i = 1; i <= lineCount; i++) {
        const lineNumberSpan = document.createElement('span');
        lineNumberSpan.textContent = i;
        lineNumberSpan.className = 'line-number-item';
        lineNumbersElement.appendChild(lineNumberSpan);
      }
      
      // 确保行号区域与文本区域滚动同步
      lineNumbersElement.scrollTop = textarea.scrollTop;
      
      // 如果没有内容，默认显示第一行
      if (lineCount === 1 && lines[0] === '') {
        lineNumbersElement.innerHTML = '<span>1</span>';
      }
    }
    
    // 同步滚动
    function syncScroll(source, target) {
      target.scrollTop = source.scrollTop;
    }
    
    // 更新字符计数
    function updateCharCount() {
      const count = clipboardContent.value.length;
      charCount.textContent = `字符数: ${count}`;
    }
    
    // 生成随机密钥 (16位字母数字组合)
    function generateKey() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      let key = '';
      for (let i = 0; i < 16; i++) {
        key += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return key;
    }
    
    // 保存内容到本地存储
    function saveContent(content) {
      const key = generateKey();
      const items = getItemsFromStorage();
      const language = editorLanguage.value;
      
      // 添加新项
      items[key] = {
        content: content,
        language: language,
        createdAt: new Date().toISOString()
      };
      
      // 保存到本地存储
      localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
      
      return key;
    }
    
    // 从本地存储获取所有项
    function getItemsFromStorage() {
      const items = localStorage.getItem(STORAGE_KEY);
      return items ? JSON.parse(items) : {};
    }
    
    // 通过密钥获取内容
    function getContentByKey(key) {
      const items = getItemsFromStorage();
      return items[key] || null;
    }
    
    // 显示通知
    function showNotification(message, type = 'success') {
      notificationMessage.textContent = message;
      
      // 设置通知类型样式
      if (type === 'success') {
        notification.className = 'fixed bottom-4 right-4 p-4 rounded-lg shadow-lg transform translate-y-0 opacity-100 transition-all duration-300 flex items-center gap-3 z-50 bg-success/20 text-success border border-success/30';
        notification.querySelector('i').className = 'fa fa-check-circle text-xl text-success';
      } else if (type === 'error') {
        notification.className = 'fixed bottom-4 right-4 p-4 rounded-lg shadow-lg transform translate-y-0 opacity-100 transition-all duration-300 flex items-center gap-3 z-50 bg-danger/20 text-danger border border-danger/30';
        notification.querySelector('i').className = 'fa fa-exclamation-circle text-xl text-danger';
      } else if (type === 'info') {
        notification.className = 'fixed bottom-4 right-4 p-4 rounded-lg shadow-lg transform translate-y-0 opacity-100 transition-all duration-300 flex items-center gap-3 z-50 bg-primary/20 text-primary border border-primary/30';
        notification.querySelector('i').className = 'fa fa-info-circle text-xl text-primary';
      }
      
      // 3秒后隐藏通知
      setTimeout(() => {
        notification.className = 'fixed bottom-4 right-4 p-4 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-3 z-50';
      }, 3000);
    }
    
    // 复制到剪切板
    function copyToClipboard(text, successMessage) {
      navigator.clipboard.writeText(text)
        .then(() => {
          showNotification(successMessage || '复制成功！');
        })
        .catch(err => {
          showNotification('复制失败，请手动复制', 'error');
          console.error('复制失败:', err);
        });
    }
    
    // 格式化代码
    function formatCode(content, language) {
      try {
        if (language === 'json') {
          return JSON.stringify(JSON.parse(content), null, 2);
        } else if (['javascript', 'js'].includes(language)) {
          // 简单的JS格式化
          return content.replace(/\{/g, '{\n  ').replace(/\}/g, '\n}').replace(/;/g, ';\n  ').replace(/,/g, ',\n  ');
        } else if (['html'].includes(language)) {
          // 简单的HTML格式化
          return content.replace(/</g, '\n<').replace(/>/g, '>\n').replace(/\n+/g, '\n').replace(/^\n/, '');
        } else if (['css', 'scss'].includes(language)) {
          // 简单的CSS格式化
          return content.replace(/\{/g, '{\n  ').replace(/\}/g, '\n}\n').replace(/;/g, ';\n  ').replace(/,/g, ',\n  ');
        } else {
          return content;
        }
      } catch (e) {
        showNotification('代码格式错误，无法格式化', 'error');
        return content;
      }
    }
    
    // 高亮结果内容
    function highlightResultContent() {
      const content = accessedContent.value;
      const language = resultLanguage.value;
      
      if (language === 'plaintext') {
        // 纯文本模式，不高亮
        highlightedResult.textContent = content;
      } else {
        // 使用highlight.js高亮代码
        highlightedResult.innerHTML = hljs.highlight(content, { language: language }).value;
      }
      
      // 生成行号
      generateLineNumbers(accessedContent, resultLineNumbers);
    }
    
    // 保存按钮点击事件
    saveButton.addEventListener('click', () => {
      const content = clipboardContent.value.trim();
      
      if (!content) {
        showNotification('请输入要保存的内容', 'error');
        clipboardContent.focus();
        return;
      }
      
      // 生成加载状态
      saveButton.disabled = true;
      saveButton.innerHTML = '<div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full loader"></div><span>保存中...</span>';
      
      // 模拟保存延迟，提升用户体验
      setTimeout(() => {
        const key = saveContent(content);
        accessKey.value = key;
        resultArea.classList.remove('hidden');
        
        // 滚动到结果区域
        resultArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        
        saveButton.disabled = false;
        saveButton.innerHTML = '<i class="fa fa-save"></i><span>保存并生成密钥</span>';
        
        showNotification('内容保存成功！');
      }, 800);
    });
    
    // 复制密钥按钮点击事件
    copyKeyButton.addEventListener('click', () => {
      const key = accessKey.value;
      if (key) {
        copyToClipboard(key, '密钥已复制到剪切板！');
      }
    });
    
    // 访问按钮点击事件
    accessButton.addEventListener('click', () => {
      const key = accessKeyInput.value.trim();
      
      if (!key) {
        showNotification('请输入访问密钥', 'error');
        accessKeyInput.focus();
        return;
      }
      
      // 生成加载状态
      accessButton.disabled = true;
      accessButton.innerHTML = '<div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full loader"></div><span>访问中...</span>';
      
      // 隐藏之前的结果和错误
      accessResultArea.classList.add('hidden');
      errorArea.classList.add('hidden');
      
      // 模拟访问延迟
      setTimeout(() => {
        const item = getContentByKey(key);
        
        if (item) {
          accessedContent.value = item.content;
          // 设置语言选择器
          resultLanguage.value = item.language || 'plaintext';
          // 高亮内容
          highlightResultContent();
          // 显示结果区域
          accessResultArea.classList.remove('hidden');
          
          // 滚动到结果区域
          accessResultArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          
          showNotification('访问成功！');
        } else {
          errorMessage.textContent = '无效的密钥，请检查并重新输入';
          errorArea.classList.remove('hidden');
          showNotification('密钥无效或已过期', 'error');
        }
        
        accessButton.disabled = false;
        accessButton.innerHTML = '<i class="fa fa-unlock-alt"></i><span>访问内容</span>';
      }, 800);
    });
    
    // 复制内容按钮点击事件
    copyContentButton.addEventListener('click', () => {
      const content = accessedContent.value;
      if (content) {
        copyToClipboard(content, '内容已复制到剪切板！');
      }
    });
    
    // 格式化按钮点击事件
    formatButton.addEventListener('click', () => {
      const content = clipboardContent.value.trim();
      if (!content) {
        showNotification('没有可格式化的内容', 'error');
        return;
      }
      
      const language = editorLanguage.value;
      const formattedContent = formatCode(content, language);
      clipboardContent.value = formattedContent;
      
      // 更新行号和字符计数
      generateLineNumbers(clipboardContent, inputLineNumbers);
      updateCharCount();
      
      showNotification('代码格式化成功！', 'info');
    });
    
    // 清空按钮点击事件
    clearButton.addEventListener('click', () => {
      if (confirm('确定要清空所有内容吗？')) {
        clipboardContent.value = '';
        generateLineNumbers(clipboardContent, inputLineNumbers);
        updateCharCount();
        showNotification('内容已清空', 'info');
      }
    });
    
    // 输入框事件监听 - 更新行号和字符计数
    clipboardContent.addEventListener('input', () => {
      generateLineNumbers(clipboardContent, inputLineNumbers);
      updateCharCount();
    });
    
    // 滚动同步 - 输入框滚动时同步行号区域
    clipboardContent.addEventListener('scroll', () => {
      syncScroll(clipboardContent, inputLineNumbers);
    });
    
    // 结果区域滚动同步
    accessedContent.addEventListener('scroll', () => {
      syncScroll(accessedContent, resultLineNumbers);
    });
    
    // 结果语言切换事件
    resultLanguage.addEventListener('change', highlightResultContent);
    
    // 移动端菜单切换
    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      
      // 切换图标
      const icon = mobileMenuButton.querySelector('i');
      if (mobileMenu.classList.contains('hidden')) {
        icon.className = 'fa fa-bars';
      } else {
        icon.className = 'fa fa-times';
      }
    });
    
    // 导航栏滚动效果
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        navbar.classList.add('py-2', 'shadow');
        navbar.classList.remove('py-3', 'shadow-sm');
      } else {
        navbar.classList.add('py-3', 'shadow-sm');
        navbar.classList.remove('py-2', 'shadow');
      }
    });
    
    // FAQ 折叠效果
    faqQuestions.forEach(question => {
      question.addEventListener('click', () => {
        const answer = question.nextElementSibling;
        const icon = question.querySelector('i');
        
        // 切换答案显示/隐藏
        answer.classList.toggle('hidden');
        
        // 旋转图标
        if (answer.classList.contains('hidden')) {
          icon.style.transform = 'rotate(0deg)';
        } else {
          icon.style.transform = 'rotate(180deg)';
        }
      });
    });
    
    // 键盘事件 - 访问区域按Enter键触发访问
    accessKeyInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        accessButton.click();
      }
    });
    
    // 平滑滚动
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        
        // 关闭移动端菜单
        if (!mobileMenu.classList.contains('hidden')) {
          mobileMenu.classList.add('hidden');
          mobileMenuButton.querySelector('i').className = 'fa fa-bars';
        }
        
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          targetElement.scrollIntoView({
            behavior: 'smooth'
          });
        }
      });
    });
    
    // 初始化
    window.addEventListener('DOMContentLoaded', () => {
      // 初始化主题（默认深色）
      initTheme();
      
      // 初始化行号
      generateLineNumbers(clipboardContent, inputLineNumbers);
      generateLineNumbers(accessedContent, resultLineNumbers);
      
      // 初始化字符计数
      updateCharCount();
      
      // 初始化highlight.js
      hljs.highlightAll();
    });
  </script>
</body>
</html>